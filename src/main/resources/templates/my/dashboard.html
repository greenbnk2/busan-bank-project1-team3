<div th:replace="~{my/_head.html}"></div>

<main>
    <div class="main-container">
        <div class="content-wrapper">

            <div th:replace="~{my/sidebar :: sidebar('dashboard')}"></div>

            <div class="main-content">
                <div class="content-header">
                    <h1>마이 대시보드</h1>
                </div>

                <div class="dashboard-user-box">
                    <div class="user-welcome">
                        <strong class="user-name" th:text="${#authentication.principal.displayName}">홍길동</strong>님,
                        오늘도 성공적인 투자를 응원합니다.
                    </div>
                    <a th:href="@{/my/info}" class="btn-white-border" style="border-radius: 4px;">회원정보수정</a>
                </div>

                <div class="dashboard-summary-row">
                    <div class="summary-card total-asset">
                        <h4>총 평가금액</h4>
                        <div class="amount-wrap">
                            <span class="amount" th:text="${#numbers.formatInteger(totalEval, 0, 'COMMA')}">0</span>
                            <span class="unit">원</span>
                        </div>
                    </div>
                    <div class="summary-card total-yield">
                        <h4>총 수익률 (평가손익)</h4>
                        <div class="amount-wrap"
                             th:classappend="${totalDiff > 0} ? 'plus' : (${totalDiff < 0} ? 'minus' : '')">
                            <span class="rate" th:text="${totalYield} + '%'">0.0%</span>
                            <span class="diff" th:text="'(' + (${totalDiff > 0} ? '+' : '') + ${#numbers.formatInteger(totalDiff, 0, 'COMMA')} + '원)'">(+ 0원)</span>
                        </div>
                    </div>
                </div>

                <div class="search-section" style="margin-top: 40px;">
                    <h3>보유 펀드 현황</h3>

                    <table class="list-table">
                        <colgroup>
                            <col style="width: 35%;">
                            <col style="width: 20%;">
                            <col style="width: 15%;">
                            <col style="width: 15%;">
                            <col style="width: 15%;">
                        </colgroup>
                        <thead>
                        <tr>
                            <th>펀드명 / 계좌번호</th>
                            <th>투자원금</th>
                            <th>평가금액</th>
                            <th>수익률</th>
                            <th>상태</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="fund : ${fundList}">
                            <td style="text-align: left; padding-left: 20px;">
                                <strong style="font-size: 14px; color: #333;" th:text="${fund.fundName}">펀드명</strong><br>
                                <span style="font-size: 12px; color: #888;" th:text="${fund.acctNo}">계좌번호</span>
                            </td>
                            <td style="text-align: right; padding-right: 20px;"
                                th:text="${#numbers.formatInteger(fund.purchaseAmount, 0, 'COMMA')} + '원'">투자원금</td>
                            <td style="text-align: right; padding-right: 20px; font-weight: bold;"
                                th:text="${#numbers.formatInteger(fund.currentEvalAmount, 0, 'COMMA')} + '원'">평가금액</td>

                            <td style="font-weight: bold;"
                                th:classappend="${fund.status == '수익'} ? 'plus-color' : (${fund.status == '손실'} ? 'minus-color' : '')"
                                th:style="${fund.status == '수익'} ? 'color:#cb2b11' : (${fund.status == '손실'} ? 'color:#004890' : 'color:#333')"
                                th:text="${(fund.yieldPct > 0 ? '+' : '') + fund.yieldPct + '%'}">
                                수익률
                            </td>

                            <td>
                                <span class="status-badge"
                                      th:classappend="${fund.status == '수익'} ? 'profit' : (${fund.status == '손실'} ? 'loss' : 'flat')"
                                      th:text="${fund.status}">
                                    상태
                                </span>
                            </td>
                        </tr>

                        <tr th:if="${#lists.isEmpty(fundList)}">
                            <td colspan="5" class="no-data-msg">보유 중인 펀드가 없습니다.</td>
                        </tr>
                        </tbody>
                    </table>

                    <div class="btn-area-center">
                        <a th:href="@{/my/account}" class="btn-search-submit" style="padding: 10px 30px; font-size: 14px;">전체 계좌 조회하기</a>
                    </div>
                </div>

                <div class="info-box" style="margin-top: 40px;">
                    <ul>
                        <li>보유 펀드의 평가금액 및 수익률은 기준가 적용일에 따라 실제 환매 시 금액과 다를 수 있습니다.</li>
                        <li>자세한 거래내역 및 수익률 보고서는 [나의 펀드 > 펀드계좌조회] 메뉴를 이용해 주시기 바랍니다.</li>
                    </ul>
                </div>

            </div> </div>
    </div>
</main>

<div th:replace="~{my/_tail.html}"></div>